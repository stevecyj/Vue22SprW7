{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.array.concat.js","webpack:///./src/views/FrontStage/CartView.vue","webpack:///./src/views/FrontStage/CartView.vue?efd9"],"names":["$","global","fails","isArray","isObject","toObject","lengthOfArrayLike","createProperty","arraySpeciesCreate","arrayMethodHasSpeciesSupport","wellKnownSymbol","V8_VERSION","IS_CONCAT_SPREADABLE","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_INDEX_EXCEEDED","TypeError","IS_CONCAT_SPREADABLE_SUPPORT","array","concat","SPECIES_SUPPORT","isConcatSpreadable","O","spreadable","undefined","FORCED","target","proto","forced","arg","i","k","length","len","E","this","A","n","arguments","_createElementVNode","class","style","id","colspan","for","_hoisted_1","disabled","cartData","carts","type","onClick","$options","_createVNode","_component_Loading","active","$data","$event","can-cancel","is-full-page","_component_Spinner","_hoisted_6","_createElementBlock","_Fragment","key","_renderList","item","_hoisted_7","product","title","coupon","qty","onChange","num","value","_hoisted_12","_toDisplayString","unit","final_total","total","price","_hoisted_16","_component_v_form","ref","onSubmit","errors","_hoisted_22","_component_v_field","user","email","name","placeholder","rules","_component_error_message","_hoisted_24","_hoisted_26","tel","_hoisted_28","address","_hoisted_30","message","as","cols","rows","Object","keys","components","Loading","Spinner","data","products","isLoadingItem","isLoading","fullPage","productId","form","mixins","swalMixins","methods","getCart","$http","get","process","then","res","catch","err","console","error","addToCart","product_id","post","alertError","removeCartItem","delete","emitter","emit","alertSuccess","updateCartItem","put","clearCarts","submitOrder","$refs","resetForm","isPhone","phoneNumber","test","mounted","__exports__","render"],"mappings":"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","file":"js/Cart.a5afc547.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar fails = require('../internals/fails');\nvar isArray = require('../internals/is-array');\nvar isObject = require('../internals/is-object');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar createProperty = require('../internals/create-property');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar IS_CONCAT_SPREADABLE = wellKnownSymbol('isConcatSpreadable');\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_INDEX_EXCEEDED = 'Maximum allowed index exceeded';\nvar TypeError = global.TypeError;\n\n// We can't use this feature detection in V8 since it causes\n// deoptimization and serious performance degradation\n// https://github.com/zloirock/core-js/issues/679\nvar IS_CONCAT_SPREADABLE_SUPPORT = V8_VERSION >= 51 || !fails(function () {\n  var array = [];\n  array[IS_CONCAT_SPREADABLE] = false;\n  return array.concat()[0] !== array;\n});\n\nvar SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('concat');\n\nvar isConcatSpreadable = function (O) {\n  if (!isObject(O)) return false;\n  var spreadable = O[IS_CONCAT_SPREADABLE];\n  return spreadable !== undefined ? !!spreadable : isArray(O);\n};\n\nvar FORCED = !IS_CONCAT_SPREADABLE_SUPPORT || !SPECIES_SUPPORT;\n\n// `Array.prototype.concat` method\n// https://tc39.es/ecma262/#sec-array.prototype.concat\n// with adding support of @@isConcatSpreadable and @@species\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  concat: function concat(arg) {\n    var O = toObject(this);\n    var A = arraySpeciesCreate(O, 0);\n    var n = 0;\n    var i, k, length, len, E;\n    for (i = -1, length = arguments.length; i < length; i++) {\n      E = i === -1 ? O : arguments[i];\n      if (isConcatSpreadable(E)) {\n        len = lengthOfArrayLike(E);\n        if (n + len > MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        for (k = 0; k < len; k++, n++) if (k in E) createProperty(A, n, E[k]);\n      } else {\n        if (n >= MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        createProperty(A, n++, E);\n      }\n    }\n    A.length = n;\n    return A;\n  }\n});\n","<template>\n  <h3>購物車</h3>\n  <div class=\"container\">\n    <!-- 購物車列表 -->\n    <div class=\"text-end\">\n      <button\n        :class=\"{ disabled: this.cartData.carts?.length === 0 }\"\n        class=\"btn btn-outline-danger\"\n        type=\"button\"\n        @click=\"clearCarts\"\n      >\n        清空購物車\n      </button>\n      <!-- test swal button -->\n      <!-- <button\n        :class=\"{ disabled: this.cartData.carts?.length === 0 }\"\n        class=\"btn btn-outline-info\"\n        type=\"button\"\n        @click=\"alertSuccess('購物車已清空')\"\n      >\n        swal\n      </button> -->\n      <!-- test loading button -->\n      <!-- <button type=\"button\" @click=\"testLoading\">loading</button> -->\n    </div>\n    <!-- vue-loading-overlay start -->\n    <div class=\"vld-parent\">\n      <Loading v-model:active=\"isLoading\" :can-cancel=\"true\" :is-full-page=\"fullPage\">\n        <Spinner></Spinner>\n      </Loading>\n    </div>\n    <!-- vue-loading-overlay end -->\n    <!-- cart list start -->\n    <table class=\"table align-middle\">\n      <thead>\n        <tr>\n          <th></th>\n          <th>品名</th>\n          <th style=\"width: 150px\">數量/單位</th>\n          <th>單價</th>\n        </tr>\n      </thead>\n      <tbody>\n        <template v-if=\"cartData.carts\">\n          <tr v-for=\"item in cartData.carts\" :key=\"item.id\">\n            <td>\n              <button\n                type=\"button\"\n                class=\"btn btn-outline-danger btn-sm\"\n                @click=\"removeCartItem(item.id)\"\n              >\n                <!-- <i v-show=\"isLoadingItem === item.id\" class=\"fas fa-spinner fa-pulse\"></i> -->\n                x\n              </button>\n            </td>\n            <td>\n              {{ item.product.title }}\n              <div v-if=\"item.coupon\" class=\"text-success\">已套用優惠券</div>\n            </td>\n            <td>\n              <div class=\"input-group input-group-sm\">\n                <div class=\"input-group mb-3\">\n                  <!-- 要相信使用者一定會亂填，改用 select -->\n                  <!-- <input class=\"form-control\" min=\"1\" type=\"number\" v-model=\"item.qty\" /> -->\n                  <select\n                    id=\"\"\n                    v-model=\"item.qty\"\n                    :disabled=\"isLoadingItem === item.id\"\n                    class=\"form-select\"\n                    @change=\"updateCartItem(item)\"\n                  >\n                    <!-- 上一個 commit 的做法，qty：當前在購物車的數量，num：迴圈的值，2個值一樣就選這個值，也可以綁在 select 的 tag 上-->\n                    <option v-for=\"num in 20\" :key=\"`${num}${item.id}`\" :value=\"num\">\n                      {{ num }}\n                    </option>\n                  </select>\n                  <span id=\"basic-addon2\" class=\"input-group-text\">{{ item.product.unit }}</span>\n                </div>\n              </div>\n            </td>\n            <td class=\"text-end\">\n              <small v-if=\"cartData.final_total !== cartData.total\" class=\"text-success\"\n                >折扣價：</small\n              >\n              {{ item.product.price * item.qty }} 元\n            </td>\n          </tr>\n        </template>\n      </tbody>\n      <tfoot>\n        <tr>\n          <td class=\"text-end\" colspan=\"3\">總計</td>\n          <td class=\"text-end\">{{ cartData.final_total }} 元</td>\n        </tr>\n        <tr>\n          <td\n            v-if=\"cartData.final_total !== cartData.total\"\n            class=\"text-end text-success\"\n            colspan=\"3\"\n          >\n            折扣價\n          </td>\n          <td v-if=\"cartData.final_total !== cartData.total\" class=\"text-end text-success\">\n            {{ cartData.final_total }}\n          </td>\n        </tr>\n      </tfoot>\n    </table>\n    <!-- cart list end -->\n    <div class=\"my-5 row justify-content-center\">\n      <!-- form start -->\n      <v-form ref=\"form\" v-slot=\"{ errors }\" class=\"col-md-6\" @submit=\"submitOrder\">\n        <!-- test error message -->\n        <!-- <span style=\"color: red\">{{ errors }}</span> -->\n        <div class=\"mb-3\">\n          <label class=\"form-label\" for=\"email\">Email</label>\n          <v-field\n            id=\"email\"\n            v-model=\"form.user.email\"\n            :class=\"{ 'is-invalid': errors['email'] }\"\n            class=\"form-control\"\n            name=\"email\"\n            placeholder=\"請輸入 Email\"\n            rules=\"email|required\"\n            type=\"email\"\n          ></v-field>\n          <error-message class=\"invalid-feedback\" name=\"email\"></error-message>\n        </div>\n\n        <div class=\"mb-3\">\n          <label class=\"form-label\" for=\"name\">收件人姓名</label>\n          <v-field\n            id=\"name\"\n            v-model=\"form.user.name\"\n            :class=\"{ 'is-invalid': errors['姓名'] }\"\n            class=\"form-control\"\n            name=\"姓名\"\n            placeholder=\"請輸入姓名\"\n            rules=\"required\"\n            type=\"text\"\n          ></v-field>\n          <error-message class=\"invalid-feedback\" name=\"姓名\"></error-message>\n        </div>\n\n        <div class=\"mb-3\">\n          <label class=\"form-label\" for=\"tel\">收件人電話</label>\n          <v-field\n            id=\"tel\"\n            v-model=\"form.user.tel\"\n            :class=\"{ 'is-invalid': errors['phone'] }\"\n            :rules=\"isPhone\"\n            class=\"form-control\"\n            name=\"phone\"\n            placeholder=\"請輸入手機(手機09XXXXXXXX，10位數字)\"\n            type=\"tel\"\n          ></v-field>\n          <error-message class=\"invalid-feedback\" name=\"phone\"></error-message>\n        </div>\n\n        <div class=\"mb-3\">\n          <label class=\"form-label\" for=\"address\">收件人地址</label>\n          <v-field\n            id=\"address\"\n            v-model=\"form.user.address\"\n            :class=\"{ 'is-invalid': errors['地址'] }\"\n            class=\"form-control\"\n            name=\"地址\"\n            placeholder=\"請輸入地址\"\n            rules=\"required\"\n            type=\"text\"\n          ></v-field>\n          <error-message class=\"invalid-feedback\" name=\"地址\"></error-message>\n        </div>\n\n        <div class=\"mb-3\">\n          <label class=\"form-label\" for=\"message\">留言</label>\n          <v-field\n            id=\"message\"\n            v-model=\"form.message\"\n            as=\"textarea\"\n            class=\"form-control\"\n            cols=\"30\"\n            name=\"留言\"\n            rows=\"10\"\n          ></v-field>\n        </div>\n        <div class=\"text-end\">\n          <!-- {{Object.keys(errors).length}} -->\n          <!-- 逆天可選運算子 -->\n          <button\n            :class=\"{\n              disabled: this.cartData.carts?.length === 0 || Object.keys(errors).length !== 0,\n            }\"\n            class=\"btn btn-danger\"\n            type=\"submit\"\n          >\n            送出訂單\n          </button>\n        </div>\n      </v-form>\n      <!-- form end -->\n    </div>\n  </div>\n</template>\n\n<script>\nimport swalMixins from '@/mixins/swalMixins';\nimport emitter from '@/libs/emitter';\n\n// vue-loading-overlay\nimport Loading from 'vue-loading-overlay';\nimport 'vue-loading-overlay/dist/vue-loading.css';\nimport Spinner from '@/components/LoadingOverlay/Spinner.vue';\n\nexport default {\n  name: 'CartView',\n  components: {\n    Loading,\n    Spinner,\n  },\n  data() {\n    return {\n      cartData: {\n        carts: [],\n      }, // cart 是拿整包資料\n      products: [],\n      isLoadingItem: '', // bootstrap loading\n      isLoading: false, // vue-overlay loading\n      fullPage: true, // vue-overlay fullPage\n      productId: '',\n      form: {\n        user: {\n          name: '',\n          email: '',\n          tel: '',\n          address: '',\n        },\n        message: '',\n      },\n    };\n  },\n  mixins: [swalMixins],\n  methods: {\n    // getProducts() {\n    //   this.$http\n    //     .get(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/products/all`)\n    //     .then((res) => {\n    //       // console.log(res);\n    //       this.isLoading = false;\n    //       this.products = res.data.products;\n    //     })\n    //     .catch((err) => {\n    //       this.isLoading = false;\n    //       console.error(err.response);\n    //       // this.alertError(err.data.message);\n    //     });\n    // },\n\n    // 取得購物車資料\n    getCart() {\n      // this.isLoading = true;\n      this.$http\n        .get(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`)\n        .then((res) => {\n          // console.log('cart', res);\n          this.cartData = res.data.data;\n          // this.isLoading = false;\n        })\n        .catch((err) => {\n          // this.isLoading = false;\n          console.error(err.data.message);\n          // this.alertError(err);\n        });\n    },\n\n    // 加入購物車\n    addToCart(id, qty = 1) {\n      const data = {\n        product_id: id,\n        qty,\n      };\n      this.isLoadingItem = id;\n      this.$http\n        .post(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`, {\n          data,\n        })\n        .then(() => {\n          // console\n          // console.log('addToCart', res);\n          this.getCart();\n        })\n        .catch((err) => {\n          // this.isLoading = false;\n          // console.error(err.data.message);\n          this.alertError(err);\n        });\n    },\n\n    // 移除購物車\n    removeCartItem(id) {\n      this.isLoading = true;\n      // console.log(`item id: ${id}`, `isLoadingItem: ${this.isLoadingItem}`);\n      this.$http\n        .delete(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${id}`)\n        .then((res) => {\n          // console.log('removeCartItem', res);\n          emitter.emit('get-cart');\n          this.alertSuccess(res.data.message);\n          this.getCart();\n          this.isLoading = false;\n        })\n        .catch((err) => {\n          this.isLoading = false;\n          // console.error(err);\n          this.alertError(err.data.message);\n        });\n    },\n\n    // 更新購物車, PUT\n    updateCartItem(item) {\n      // const apiUrl = `/v2/api/${apiPath}/cart/${item.id}`; // 這裡從整包物件裡拿 id(cart id)\n      const data = {\n        product_id: item.product_id, // product id\n        qty: item.qty,\n      };\n      this.isLoadingItem = item.id;\n      this.$http\n        .put(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${item.id}`, {\n          data,\n        })\n        .then((res) => {\n          // console.log('updateCartItem', item.id, res.data.data);\n          this.alertSuccess(res.data.message);\n          this.getCart();\n          this.isLoadingItem = '';\n        })\n        .catch((err) => {\n          this.isLoadingItem = '';\n          // console.error(err.data.message);\n          this.alertError(err.data.message);\n        });\n    },\n\n    // 清空購物車\n    clearCarts() {\n      this.isLoading = true;\n      this.$http\n        .delete(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/carts`)\n        .then((res) => {\n          // console.log('clearCarts', res);\n          this.alertSuccess(res.data.message);\n          emitter.emit('get-cart');\n          this.getCart();\n          this.isLoading = false;\n        })\n        .catch((err) => {\n          this.isLoading = false;\n          console.error(err);\n          this.alertError(err.data.message);\n        });\n    },\n\n    // 送出訂單\n    submitOrder() {\n      const data = this.form;\n      this.isLoading = true;\n      this.$http\n        .post(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/order`, {\n          data,\n        })\n        .then((res) => {\n          // console.log('submitOrder', res);\n          this.$refs.form.resetForm();\n          this.alertSuccess(res.data.message);\n          emitter.emit('get-cart');\n          this.getCart();\n          this.isLoading = false;\n        })\n        .catch((err) => {\n          this.isLoading = false;\n          // console.error(err.data.message);\n          this.alertError(err.data.message);\n        });\n    },\n\n    // validate rule for phone\n    isPhone(value) {\n      const phoneNumber = /^(09)[0-9]{8}$/;\n      return phoneNumber.test(value) ? true : '請填寫正確的手機號碼';\n    },\n\n    // test vue-loading-overlay\n    // testLoading() {\n    //   this.isLoading = true;\n    //   setTimeout(() => {\n    //     this.isLoading = false;\n    //   }, 3000);\n    // },\n  },\n  mounted() {\n    this.getCart();\n  },\n};\n</script>\n","import { render } from \"./CartView.vue?vue&type=template&id=6aedad38\"\nimport script from \"./CartView.vue?vue&type=script&lang=js\"\nexport * from \"./CartView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/var/www/html/Vue22SprW7/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}